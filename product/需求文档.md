# 产品需求

## 灵感
- 产品名
    - mini chat
    - mini talk
    - 小侃
    - 定位 -> 蝙蝠 -> 蝙蝠翅膀
    - 侃 -> 人 + 章鱼
    - 章鱼 + 网
- 关键词
    - 社交恐惧
    - 不擅长交流
    - 不喜欢加很多联系人
- 文案
    - 当你在凝望深渊的时候，深渊也在凝望着你。
    - 你有多久没和朋友聚聚了？不对，你有朋友吗？
    - 你身边没有人，去刷微博，聊微信吧！
    - 孤独也许并不是坏事，看看书吧！
    - 我们以前不认识，现在不认识，以后也不一定会认识，那又怎样？这一该请把我当你的朋友。
    - 嘿，陌生人，做一分钟的朋友吧！
    - 你好，陌生人！再见，陌生人！
    - 我说的再见，是再也不见，也许也从未见过。
    - TA 再远离你，如果不留下联系方式，这就是永别！

## 产品目的，源起

- 想要做一个基于小程序和腾讯 im 服务的聊天应用
- 定位陌生人社交和聚会社交
- 我们在一个聚会里，需要有用到 im 应用进行交流和别的活动的情况，但是不想加别人的微信，也不想加入任何群聊

## 产品功能描述

- 基于小程序
- 有基本的聊天功能，支持文字，~~语音~~，emoj, 图片表情 （不要语音）
- 不支持加好友，
- 只要附近（一定的范围）有人也打开这个小程序就会自动把 ta 加到彼此的联系人列表
- 在范围内可以把这些人拉入一个群聊组，满足聚会的需求（~~发红包，小游戏~~）
- 当使用这个应用的两个人彼此离开一规定的距离联系人会消失，加入的群聊也会被踢出（或离线状态，进入范围重新上线）

## 一些产品细节想法

- 有人进入可聊范围后，可以有较弱的提示音效或静默处理
- 产品逻辑尽量简单，清新。
- 昵称和头像必须有一个是显示的
- 不支持图片发送，后面可以加上图片表情的发送。
- 没有群主
- 单聊联系人离开可聊天距离后就显示离线状态，消息记录保留 15 钟，过时就永久清除
- 群以创建地点为标识，如果所有联系人离开这个地点超过 1 小时，就删除群，并清除聊天信息。

## 使用技术

- 前端使用微信小程序
- 聊天服务使用腾讯 im 服务
- 后端暂定 python 或 node（如果没有别人加入的情况下，需要学）
- 第一版 demo 尽量不要使用后端。

## 产品流程

- 进入应用 ->
- 获得授权(基本信息，定位) -> 
- 主界面
    - 可聊天联系人列表(或空) -> 进入聊天界面
        - 显示默认头像(如果有，没有则显示系统默认)（不能查看对方信息）-> 基本聊天功能 -> 当前聊天对象离开(或主动离开) -> (弹出结束前的感觉评价界面，对聊天对象第一印象评价或直接跳过) -> 清除聊天记录 -> 返回主界面 ->
    - 可选中多人，建立群聊 -> 进入群聊
        - 基本群聊功能
            - 当自己离开到一定的距离 -> 离线 -> 更远距离 -> 自动退出群聊 -> 回到首页
            - 群主可以主动解散当前群 -> 回到首页
            - 当群中只剩下一个人时 -> 当前群自动解散 -> 回到首页
            - 查看群成员
                - 添加成员 -> 自己的联系人 -> 选中 - 加入群聊 -> 回到群聊天
                - 单个选择成员 -> 踢出成员 -> 返回成员列表 -> 返回群聊天
                - 返回群聊天
        - 返回首页
        - 左滑群列表条目，显示退群按钮
    - 个人中心
        - 当前账号基本信息
        - 基本设置
            - 显示/隐藏 头像
            - 显示/隐藏 昵称
            - 显示/隐藏 性别

## 各页面功能  

- *首页
    - 展示用户列表
    - 展示群聊列表
    - 个人中心按钮
    - 建群按钮
    - *建群界面
        - 展示联系人
        - 全选按钮
        - 取消按钮
        - 确认按钮
- *单聊界面
    - 聊天消息展示
    - 聊天消息文字输入框
    - ~~聊天消息语音输入按钮~~
    - 聊天图片发送按钮
    - 聊天表情发送按钮
    - 返回按钮
- *群聊页面
    - 聊天消息展示
    - 聊天消息发送输入框
    - ~~聊天语音输入按钮~~
    - ~~聊天图片发送按钮~~
    - 聊天表情发送按钮
    - 查看群成员按钮
    - *群成员列表界面
        - 群成员展示列表
        - 编辑/全选 按钮
        - 踢出按钮
        - 返回 按钮
        - *加入成员列表界面
            - 联系人展示
            - 全选按钮
            - 加入按钮
            - 返回按钮
- *个人中心界面
    - 个人信息
    - 头像开关
    - 昵称开关
    - 性别开头

## 设计规范
- 一个主色 + （辅助主色）
- 三种特殊颜色
    - 成功色 #09bb07
    - 警告色
    - 错误色 #e64340
- 两种标题字体大小 
    - 一级标题 18px 
    - 二级标题 16px
- 一种正文字体大小 14px
- 一种辅助字体大小 12px
- 两种字体颜色
    - 普通字体颜色 #353535
    - 辅助字体颜色  #888888
    - 连接字体颜色 #576b95
- 两种字体重量
    - 粗体
    - 正常体
- 两种圆角尺寸
    - 正常圆角 16px
    - 较小圆角  4px
- 4种见容间隙
    - 较大间隙 20px
    - 正常间隙 15px
    - 内容较大间隙 12px
    - 内容间隙正常 8px
    - 内容间隙较小 5px
- 两种背景色
    - 一种是白色
    - 一种是灰色 #dedede

## 设计
- 从空白内容页面开始设计
- 增加一些有深意的空白 slogan

## 接口(按页面)
- 启动应用时（全局）
    - 小程序授权 -> 【小程序】
    - 拉取微信用户信息 -> 【小程序】
    - 创建用户 -> 【后端】创建 IM 账号-> 【IM】
    - 获取 IM sdk AppId -> 【后端】
    - 登录 IM -> 【IM】
    - 监听单聊消息 ->【IM】
    - 监听群聊消息 ->【IM】
    - 监听实时地理位置变化 -> 【小程序】
    - 更新当前位置 -> 【后端】清除会话，解散群 -> 【IM】
    - 【后端】单聊消息回调 -> 【IM】
- 单聊列表
    - 拉取联系人列表 -> 【后端】新建会话 -> 【IM】
- 单聊会话界面
    - 获取聊天记录 ->【后端】
    - 发送消息 -> 【IM】
- 群组列表
    - 查询群聊列表 -> 【后端】
    - 查询联系人 -> 【后端】
    - 建立群组 -> 【后端】创建群组 -> 【IM】
- 群聊会话界面
    - 获取聊天记录 -> 【后端】
    - 发送消息 -> 【IM】
    - 查询群成员 ->【后端】
    - 删除群成员 ->【后端】删除群成员 ->【IM】
    - 查询联系人 ->【后端】
    - 新增群成员 ->【后端】新增群成员 -> 【IM】
- 个人中心
    - 查询用户详情 -> 【后端】
    - 更新用户信息显示状态 -> 【后端】



